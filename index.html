<!DOCTYPE html>
<head>
<title></title>
<meta charset='utf-8' />
<!--favicon-->
<link rel="shortcut icon" type="image/ico" href="assets/pat.ico" />
<!--jquery-->
<script src="public/js/jquery-2.2.0.min.js"></script>
<!--leafletjs-->
<script src="public/js/leaflet.js"></script>
<!--d3-->
<script src="public/js/d3.min.js"></script>
<!--bootstrap-->
<link href="public/css/bootstrap.css" rel="stylesheet">
<!--leaflet-->
<link rel="stylesheet" href="public/css/leaflet.css" />
<!--my stylesheet-->
<link rel="stylesheet" href="public/css/style.css" />

<style>
#map{ height:325px; }
</style>

</head>

<body>


  <div class="container max-width">

    <div id="map"></div>
  </div>

  <footer style="bottom:0;margin-top:40px;margin-bottom:15px;">
    <div class="container" style="text-align:center;">

    </div>
  </footer>


<script src="public/js/aca_map_with_pop_medicaid.geojson"></script>

<script>
$(document).ready(function(){


  var map = L.map('map').setView([35.216173, -78.936768], 7);

  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);


  var min = 200;

  L.geoJson(geojsonFeatures, {
    style: function (feature) {

      var numer = feature.properties.PlanSelec;
      var county = feature.properties.NAME_LOCAS;
      var denom = feature.properties.EligibleFo;
      var percent = numer/denom;
      percent = Math.round(percent * 100);

      if (percent < min )
      {
        min = percent;
      }

      if (percent <= 13) {
          return {
            "fillColor":"#edf8fb",
            "weight": 1,
            "fillOpacity": 1
          };

      } else if ( percent <= 33) {
        return {
          "fillColor":"#b3cde3",
          "weight": 1,
          "fillOpacity": 1
        };
      } else if (percent <= 53) {
        return {
          "fillColor":"#8c96c6",
          "weight": 1,
          "fillOpacity": 1
        };
      } else if (percent <= 73) {
        return {
          "fillColor":"#8856a7",
          "weight": 1,
          "fillOpacity": 1
        };
      } else if (percent > 73){
        return {
          "fillColor": "#810f7c",
          "weight": 1,
          "fillOpacity": 1
        }
      }


    }


    }).bindPopup(function (layer) {
        var numer = layer.feature.properties.PlanSelec;
        var county = layer.feature.properties.NAME_LOCAS;
        var denom = layer.feature.properties.EligibleFo;
        var percent = numer/denom;
        percent = Math.round(percent * 100);
        if(percent > 90){
          percent = "> 90";
        }
        percent = county + "<br>" + percent + " percent";

        console.log(numer);
        console.log(denom);

        return "<h5>" + percent + "</h5>";




    }).addTo(map);


  console.log(min);

      // Disable drag and zoom handlers.
      // map.dragging.disable();
      map.touchZoom.disable();
      map.doubleClickZoom.disable();
      map.scrollWheelZoom.disable();
      map.keyboard.disable();

      // Disable tap handler, if present.
      if (map.tap) map.tap.disable();

console.log("end");

});

</script>



</body>

</html>
